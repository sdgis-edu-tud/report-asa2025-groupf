<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Appendix – Unpacking Dresden</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../sections/interactive_map.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7bc91843a94618af6381c42aa9e9588c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../sections/appendix.html">Appendix</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Unpacking Dresden</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/preliminary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preliminary Maps and Research</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/problem_statement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Problem Statement, Objectives and Criteria</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/mcda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">MCDA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/typology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Typology Construction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliography</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/interactive_map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interactive Map of the Attributes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/appendix.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Appendix</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-ndvi-computation" id="toc-sec-ndvi-computation" class="nav-link active" data-scroll-target="#sec-ndvi-computation">NDVI Computation</a></li>
  <li><a href="#sec-buidig-information" id="toc-sec-buidig-information" class="nav-link" data-scroll-target="#sec-buidig-information">Building Geometry</a></li>
  <li><a href="#maps-not-included-in-final-results" id="toc-maps-not-included-in-final-results" class="nav-link" data-scroll-target="#maps-not-included-in-final-results">Maps Not Included in Final Results</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/edit/main/sections/appendix.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/blob/main/sections/appendix.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-ndvi-computation" class="level2">
<h2 class="anchored" data-anchor-id="sec-ndvi-computation">NDVI Computation</h2>
<p>The code chunk that we used to compute the NDVI from Google Earth Engine is shown below. It actually computes the NDVI as well as two other indices (NDREI and NDWI) that we ended up not using for our analysis. You can easily compute other indices with the library that is used, by changing the variable called <code>indices</code>. Furthermore, it computes an average on the last five years, roughly for each season, and exports the data to Google Earth Engine. You might have to change the output path to adapt it to your situation in the call to the function <code>Export.image.toDrive</code>. Finally, this algorithm requires an extent (a vector layer) as an input that defines the area of interest. This can be changed in the variable called <code>extent</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> extent <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">"projects/arfw0501/assets/Spatial_units_extent"</span>)<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> spectral <span class="op">=</span> <span class="pp">require</span>(<span class="st">"users/dmlmont/spectral:spectral"</span>)<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Indices to compute</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> indices <span class="op">=</span> [<span class="st">"NDVI"</span><span class="op">,</span> <span class="st">"NDREI"</span><span class="op">,</span> <span class="st">"NDWI"</span>]<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the bounding box of the shapefile and buffer it</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> bbox <span class="op">=</span> extent<span class="op">.</span><span class="fu">geometry</span>()<span class="op">.</span><span class="fu">bounds</span>()<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> bbox_utm <span class="op">=</span> bbox<span class="op">.</span><span class="fu">transform</span>(<span class="st">'EPSG:25833'</span><span class="op">,</span> <span class="fl">0.1</span>)<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> bbox_wgs84_buffered <span class="op">=</span> bbox_utm<span class="op">.</span><span class="fu">transform</span>(<span class="st">'EPSG:4326'</span><span class="op">,</span> <span class="fl">0.1</span>)<span class="op">.</span><span class="fu">buffer</span>(<span class="dv">3000</span>)<span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Center the map</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">centerObject</span>(bbox_wgs84_buffered<span class="op">,</span> <span class="dv">12</span>)<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Define seasons and their date patterns</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> seasons <span class="op">=</span> [</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">'Winter'</span><span class="op">,</span> <span class="dt">start</span><span class="op">:</span> <span class="st">'-12-01'</span><span class="op">,</span> <span class="dt">end</span><span class="op">:</span> <span class="st">'-02-28'</span><span class="op">,</span> <span class="dt">lastStartYear</span><span class="op">:</span> <span class="dv">2024</span>}<span class="op">,</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">'Spring'</span><span class="op">,</span> <span class="dt">start</span><span class="op">:</span> <span class="st">'-03-01'</span><span class="op">,</span> <span class="dt">end</span><span class="op">:</span> <span class="st">'-05-31'</span><span class="op">,</span> <span class="dt">lastStartYear</span><span class="op">:</span> <span class="dv">2024</span>}<span class="op">,</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">'Summer'</span><span class="op">,</span> <span class="dt">start</span><span class="op">:</span> <span class="st">'-06-01'</span><span class="op">,</span> <span class="dt">end</span><span class="op">:</span> <span class="st">'-08-31'</span><span class="op">,</span> <span class="dt">lastStartYear</span><span class="op">:</span> <span class="dv">2024</span>}<span class="op">,</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">'Autumn'</span><span class="op">,</span> <span class="dt">start</span><span class="op">:</span> <span class="st">'-09-01'</span><span class="op">,</span> <span class="dt">end</span><span class="op">:</span> <span class="st">'-11-30'</span><span class="op">,</span> <span class="dt">lastStartYear</span><span class="op">:</span> <span class="dv">2024</span>}<span class="op">,</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Loop over each season</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>seasons<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(season) {</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Create an object to store images for each index</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> indexImages <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Initialize empty lists per index</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  indices<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(index) {</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    indexImages[index] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Loop over the past 5 years</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">var</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> y <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> y<span class="op">++</span>) {</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> year <span class="op">=</span> season<span class="op">.</span><span class="at">lastStartYear</span> <span class="op">-</span> y<span class="op">;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> startYear <span class="op">=</span> year<span class="op">;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> endYear <span class="op">=</span> (season<span class="op">.</span><span class="at">name</span> <span class="op">===</span> <span class="st">'Winter'</span>) <span class="op">?</span> year <span class="op">+</span> <span class="dv">1</span> <span class="op">:</span> year<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> startDate <span class="op">=</span> startYear <span class="op">+</span> season<span class="op">.</span><span class="at">start</span><span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> endDate <span class="op">=</span> endYear <span class="op">+</span> season<span class="op">.</span><span class="at">end</span><span class="op">;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Load and filter Sentinel-2 imagery</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> collection <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(<span class="st">'COPERNICUS/S2_SR_HARMONIZED'</span>)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filterBounds</span>(bbox_wgs84_buffered)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filterDate</span>(startDate<span class="op">,</span> endDate)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">lt</span>(<span class="st">'CLOUDY_PIXEL_PERCENTAGE'</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">median</span>()<span class="op">;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Compute all requested indices</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> parameters <span class="op">=</span> {</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"S2"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B12"</span>)<span class="op">,</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"S1"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B11"</span>)<span class="op">,</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">"N2"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B8A"</span>)<span class="op">,</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">"N"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B8"</span>)<span class="op">,</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>      <span class="st">"RE3"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B7"</span>)<span class="op">,</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>      <span class="st">"RE2"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B6"</span>)<span class="op">,</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>      <span class="st">"RE1"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B5"</span>)<span class="op">,</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>      <span class="st">"R"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B4"</span>)<span class="op">,</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>      <span class="st">"G"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B3"</span>)<span class="op">,</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>      <span class="st">"B"</span><span class="op">:</span> collection<span class="op">.</span><span class="fu">select</span>(<span class="st">"B2"</span>)<span class="op">,</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">"L"</span><span class="op">:</span> <span class="fl">0.5</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> computedIndices <span class="op">=</span> spectral<span class="op">.</span><span class="fu">computeIndex</span>(collection<span class="op">,</span> indices<span class="op">,</span> parameters)<span class="op">;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    computedIndices <span class="op">=</span> computedIndices<span class="op">.</span><span class="fu">clip</span>(bbox_wgs84_buffered)<span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add each computed index image to the relevant list</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    indices<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(index) {</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>      indexImages[index]<span class="op">.</span><span class="fu">push</span>(computedIndices<span class="op">.</span><span class="fu">select</span>(index))<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Compute and display/export average per index for the season</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  indices<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(index) {</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> meanImage <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(indexImages[index])<span class="op">.</span><span class="fu">mean</span>()<span class="op">;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Display</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(meanImage<span class="op">,</span> {<span class="dt">min</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">palette</span><span class="op">:</span> [<span class="st">'red'</span><span class="op">,</span> <span class="st">'white'</span><span class="op">,</span> <span class="st">'green'</span>]}<span class="op">,</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>      index <span class="op">+</span> <span class="st">'_'</span> <span class="op">+</span> season<span class="op">.</span><span class="at">name</span> <span class="op">+</span> <span class="st">'_mean'</span>)<span class="op">;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Export</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    Export<span class="op">.</span><span class="at">image</span><span class="op">.</span><span class="fu">toDrive</span>({</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>      <span class="dt">image</span><span class="op">:</span> meanImage<span class="op">,</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span> index <span class="op">+</span> <span class="st">'-'</span> <span class="op">+</span> season<span class="op">.</span><span class="at">name</span> <span class="op">+</span> <span class="st">'-mean_5yr'</span><span class="op">,</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>      <span class="dt">folder</span><span class="op">:</span> <span class="st">'EarthEngineExports'</span><span class="op">,</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fileNamePrefix</span><span class="op">:</span> index <span class="op">+</span> <span class="st">'-'</span> <span class="op">+</span> season<span class="op">.</span><span class="at">name</span> <span class="op">+</span> <span class="st">'-mean_5yr'</span><span class="op">,</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>      <span class="dt">region</span><span class="op">:</span> bbox_utm<span class="op">,</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>      <span class="dt">scale</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>      <span class="dt">crs</span><span class="op">:</span> <span class="st">'EPSG:25833'</span><span class="op">,</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>      <span class="dt">maxPixels</span><span class="op">:</span> <span class="fl">1e13</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sec-buidig-information" class="level2">
<h2 class="anchored" data-anchor-id="sec-buidig-information">Building Geometry</h2>
<p>The process of fixing the geometries of the clipped building layer can be done through this text Since the building layer had several geometry errors, it went through some geometry validation and fixing processes (i.e.&nbsp;valid geometry, fix geometries, simplify and re-project). For a smoother experience, you can read through this process to fix your geometries:</p>
<p>“Use “Check Validity” Go to: Vector → Geometry Tools → Check Validity</p>
<p>Choose “GEOS” as the engine.</p>
<p>Review the reported issues — “valid” in QGIS may not be sufficient for overlay ops if robustness is compromised.</p>
<p>Fix Geometries (Again) Run: Vector → Geometry Tools → Fix Geometries</p>
<p>If already done, try exporting the layer as a new file (Right-click layer → Export → Save Features As…) to reset underlying geometry representations.</p>
<p>Simplify or Snap Geometries Minor overlaps/gaps or very close vertices can trigger GEOS precision issues.</p>
<p>Try:</p>
<p>Vector → Geometry Tools → Snap geometries to layer</p>
<p>or Vector → Geometry Tools → Simplify Geometry</p>
<p>Use “Invalid Geometry Handling” in Processing If using model/processing tools, go to the settings (Processing → Options) → “Invalid geometry handling” → set to “Ignore features with invalid geometries” (temporary workaround).</p>
<p>Use Buffer(0) as a Cleanup Trick Use the expression:</p>
<p>buffer($geometry, 0)</p>
<p>in the Geometry by Expression tool. It often resolves subtle robustness problems.</p>
<p>Your raster is in EPSG:25833, but you’re trying to extract it using a mask layer in EPSG:32633. These CRS look similar (both UTM zone 33N), but they’re not the same datum:</p>
<p>EPSG:25833 → ETRS89 (used in Europe, based on stable tectonic plate)</p>
<p>EPSG:32633 → WGS84 (global standard)</p>
<p>GEOS and GDAL can throw robustness errors if vector and raster CRS differ even slightly during masking.</p>
<p>Option 1: Reproject the Mask Layer to Match the Raster Right-click the mask layer → Export → Save Features As…</p>
<p>Set CRS to EPSG:25833</p>
<p>Use the new projected mask layer for extraction.</p>
<p>Then:</p>
<p>Raster → Extraction → Clip Raster by Mask Layer</p>
<p>Use this EPSG:25833 version of the mask</p>
<p>Option 2: Reproject the Raster Instead If the mask needs to stay in 32633, reproject the raster:</p>
<p>Raster → Projections → Warp (Reproject)</p>
<p>Target CRS: EPSG:32633</p>
<p>Resampling: Nearest neighbour (for categorical) or Bilinear (for continuous)</p>
<p>Save as new GeoTIFF</p>
<p>Then run the extract using the reprojected raster.</p>
<p>Always ensure both raster and mask have the exact same CRS (code and datum), not just similar projection zones. Otherwise, operations like masking can fail due to subtle misalignments or geometry issues.</p>
<p>Furthermore, if you received such error:</p>
<p>Warning 1: Holes are nested at or near point 403128.48007987819 5659925.564998446ERROR 1: Cutline polygon is invalid.</p>
<p>This means your cutline (mask) layer dissolved_fixed_reprojected.shp has self-intersecting or nested holes.</p>
<p>GDAL (gdalwarp) cannot use this geometry until it is fully valid and simplified.</p>
<p>Final Fix — Repair Deep Geometry Issues Do the following in exact order:</p>
<p>Explode MultiParts Vector → Geometry Tools → Multipart to Singleparts → Run it on dissolved_fixed_reprojected.shp → Save result as e.g.&nbsp;dissolved_singleparts.shp</p>
<p>Use “Buffer(0)” Trick Open Processing Toolbox</p>
<p>Use Geometry by Expression on the singlepart layer</p>
<p>Expression:</p>
<p>buffer($geometry, 0)</p>
<p>Save as: dissolved_cleaned_buffer0.shp</p>
<p>This rewrites the geometry and usually removes nested holes and invalid rings.</p>
<p>Final Geometry Check Run Check Validity tool on dissolved_cleaned_buffer0.shp</p>
<p>GEOS engine</p>
<p>All features must be valid</p>
<p>Reproject This Layer (if needed) If your raster is in EPSG:25833, make sure this cleaned mask is also in EPSG:25833.</p>
<p>If you found a few invalid geometries after running Check Validity, do this:</p>
<p>Fix Them Properly (Step-by-Step) 1. Isolate Invalid Features Open the Check Validity output layer (or attribute table):</p>
<p>Filter by “valid” = ‘0’</p>
<p>Select all invalid features</p>
<p>Fix Individually or in Batch Use either:</p>
<p>A. Manual Fix:</p>
<p>Enable editing</p>
<p>Use vertex tool to correct overlapping rings, holes, etc.</p>
<p>Useful for &lt;10 features</p>
<p>B. Automated Fix:</p>
<p>Select invalid features</p>
<p>Run: Vector → Geometry Tools → Fix Geometries</p>
<p>Only apply to selected features</p>
<p>Save as fixed_invalids.shp</p>
<p>Replace Invalids in Main Layer Use “Merge Vector Layers”:</p>
<p>Input: your original cleaned valid layer + fixed_invalids.shp</p>
<p>Output: final_cleaned_mask.shp</p>
<p>if you faced such error:</p>
<p>Warning 1: Too few points in geometry component at or near point 7143.291…ERROR 1: Cutline polygon is invalid.</p>
<p>means you have “degenerate geometries” in your “valid” features — like a polygon made from just 1 or 2 vertices, which isn’t a valid polygon for GDAL.</p>
<p>Solution: Remove Features with Too Few Vertices Open the attribute table of valid_only_mask_readyformask.shp</p>
<p>Use this filter in the expression dialog:</p>
<p>num_points($geometry) &gt;= 4</p>
<p>Export the selected features:</p>
<p>Right-click → Export → Save Selected Features As…</p>
<p>Name it valid_clean_mask.shp</p>
<p>Optional: Run Buffer(0) Again Just to be sure:</p>
<p>Geometry by Expression</p>
<p>Use: buffer($geometry, 0)</p>
<p>Save result as final_cutline_mask.shp</p>
<p>Retry Clipping Now use final_cutline_mask.shp as your cutline. This should fully eliminate:</p>
<p>Nested holes</p>
<p>Invalid rings</p>
<p>Too-few-points geometries</p>
<p>Let me know if you’d prefer a PyQGIS script or model to automate this.</p>
<p>If you faced this error:</p>
<p>Warning 1: Self-intersection at or near point … ERROR 1: Cutline polygon is invalid.</p>
<p>means even after filtering and buffering, some geometries still have self-intersections, often caused by very small rings or overlapping vertices introduced during buffering or fixing.</p>
<p>Final Clean Repair: Force Rebuild of Valid Topology Do this:</p>
<p>Use Delete Holes Vector → Geometry Tools → Delete holes</p>
<p>Input: final_cutline_mask_buffered.shp</p>
<p>Keep minimum area very small (e.g.&nbsp;0.0001)</p>
<p>Save as final_noholes.shp</p>
<p>Simplify + Buffer(0) Combo Now:</p>
<p>Run Simplify Geometry:</p>
<p>Tolerance: 0.01 to 0.1 depending on your unit (meters)</p>
<p>Save as final_simplified.shp</p>
<p>Then apply buffer($geometry, 0) again on that layer</p>
<p>Re-check Validity One Last Time Use Check Validity (GEOS) on the result.</p>
<p>Ensure all features pass.</p>
<p>Use That as Cutline Use the output from the above steps (final_simplified_buffered.shp) as your mask layer.”</p>
<p>Recap &amp; Summary</p>
<p>Always match CRS between raster and mask.</p>
<p>Run Check Validity, Delete Holes, Simplify, and buffer($geometry, 0) on complex masks.</p>
<p>Filter out degenerate geometries (num_points($geometry) &lt; 4).</p>
<p>Use batch or models to automate cleanup when needed.</p>
<p>Resample the raster to smaller resolution</p>
<p>After processing the mask layer, it was used to clip the raster layer and patched with the DSM layer to go through the shadow analysis process. Since the raster layer is very large, there’s a need to reduce the resolution or just clipping it to a smaller area, unless a strong machine with minimum 32GB RAM would run the analysis. Otherwise, the process cannot be done due to lack of memory in your machine.</p>
<p>“To resample the raster resolution:</p>
<p>If you’re using 0.5m or 1m resolution:</p>
<p>Use Raster → Projections → Warp (Reproject)</p>
<p>Set a coarser pixel size (e.g.&nbsp;2m or 5m)</p>
<p>Resampling: Average or Nearest Neighbour”.</p>
<p>The patched layer was resampled to 3m resolution which made the process feasible.</p>
</section>
<section id="maps-not-included-in-final-results" class="level2">
<h2 class="anchored" data-anchor-id="maps-not-included-in-final-results">Maps Not Included in Final Results</h2>
<p>We did an accessibility analysis to identify areas within walking distance of the streams, with steps as follows:</p>
<ol type="1">
<li>Interpolated points were generated every 500m along the stream center line and river outline.</li>
<li>Using the service area tool, we identified which areas within walking distance of interpolated points using three ranges 500m, 750, and 1000m</li>
<li>The output layers were aggregated to our the spatial units with assigned scores: 1 for areas within 500m, 0.5 for 750, and 0 for 1000m</li>
</ol>
<p>We excluded these maps from further analysis because some spatial units had no value after aggregation.</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="images/Accessibility_old-01.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="images/Accessibility_old-01.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="images/Accessibility_old2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="images/Accessibility_old2.png" class="img-fluid"></a></p>
</div>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Bernhardt2007Restoring" class="csl-entry" role="listitem">
Bernhardt, E., and M. Palmer. 2007. <span>“Restoring Streams in an Urbanizing World.”</span> <em>Freshwater Biology</em> 52: 738–51. <a href="https://doi.org/10.1111/J.1365-2427.2006.01718.X">https://doi.org/10.1111/J.1365-2427.2006.01718.X</a>.
</div>
<div id="ref-dramstad1996landscape" class="csl-entry" role="listitem">
Dramstad, W., J. D. Olson, and R. T. Forman. 1996. <em>Landscape Ecology Principles in Landscape Architecture and Land-Use Planning</em>. Shearwater Books.
</div>
<div id="ref-govdata_efre" class="csl-entry" role="listitem">
GovData. n.d. <span>“<span>EFRE 2007-2013 - Stadtteilentwicklungsprojekte - GOVData</span>.”</span> <a href="https://www.govdata.de/suche/daten/efre-2007-2013-stadtteilentwicklungsprojekte4de7e" class="uri">https://www.govdata.de/suche/daten/efre-2007-2013-stadtteilentwicklungsprojekte4de7e</a>.
</div>
<div id="ref-govdata_gewaessersysteme" class="csl-entry" role="listitem">
———. n.d. <span>“<span>Gewässersysteme - GOVData</span>.”</span> <a href="https://www.govdata.de/suche/daten/gewassersystemecb4ef" class="uri">https://www.govdata.de/suche/daten/gewassersystemecb4ef</a>.
</div>
<div id="ref-govdata_wfs" class="csl-entry" role="listitem">
———. n.d. <span>“<span>Web Feature Service</span>.”</span> <a href="https://kommisdd.dresden.de/net3/public/ogc.ashx?NodeId=1150&amp;Service=WFS&amp;Request=GetCapabilities" class="uri">https://kommisdd.dresden.de/net3/public/ogc.ashx?NodeId=1150&amp;Service=WFS&amp;Request=GetCapabilities</a>.
</div>
<div id="ref-perrelet2024engineering" class="csl-entry" role="listitem">
Perrelet, K., M. Moretti, A. Dietzel, F. Altermatt, and L. M. Cook. 2024. <span>“Engineering Blue-Green Infrastructure for and with Biodiversity in Cities.”</span> <em>Npj Urban Sustainability</em> 4 (27). <a href="https://doi.org/10.1038/s42949-024-00163-y">https://doi.org/10.1038/s42949-024-00163-y</a>.
</div>
<div id="ref-riley2016restoring" class="csl-entry" role="listitem">
Riley, A. 2016. <em>Restoring Neighborhood Streams: Planning, Design and Construction</em>. USA: Island Press.
</div>
<div id="ref-riley_restoring_2016" class="csl-entry" role="listitem">
Riley, Ann L. 2016. <em>Restoring <span>Neighborhood</span> <span>Streams</span></em>. Washington, DC: Island Press/Center for Resource Economics. <a href="https://doi.org/10.5822/978-1-61091-741-4">https://doi.org/10.5822/978-1-61091-741-4</a>.
</div>
<div id="ref-Saaty1987analytic" class="csl-entry" role="listitem">
Saaty, R. W. 1987. <span>“The Analytic Hierarchy Process—What It Is and How It Is Used.”</span> <em>Mathematical Modelling</em> 9 (3): 161–76. <a href="https://doi.org/10.1016/0270-0255(87)90473-8">https://doi.org/10.1016/0270-0255(87)90473-8</a>.
</div>
<div id="ref-Scoggins2022Community-powered" class="csl-entry" role="listitem">
Scoggins, M., D. Booth, T. Fletcher, M. Fork, Ana M González, R. Hale, R. Hawley, et al. 2022. <span>“Community-Powered Urban Stream Restoration: A Vision for Sustainable and Resilient Urban Ecosystems.”</span> <em>Freshwater Science</em> 41: 404. <a href="https://doi.org/10.1086/721150">https://doi.org/10.1086/721150</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../sections/interactive_map.html" class="pagination-link" aria-label="Interactive Map of the Attributes">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Interactive Map of the Attributes</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/edit/main/sections/appendix.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/blob/main/sections/appendix.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/sdgis-edu-tud/report-asa2025-groupf/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>